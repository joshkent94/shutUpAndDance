(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{34:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),s=n(19),i=n.n(s),o=n(15),l=n(4),u=(n(34),n(3)),d=n(11),b=n(2),j=n.n(b),m=n(5),f=n(8),h="",O=Object(f.b)("preLogin/requestLogin",function(){var e=Object(m.a)(j.a.mark((function e(t){var n,c,r,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,c=t.password,r={email:n,password:c},e.next=4,fetch("".concat(h,"/authenticate"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if(!(a=e.sent).ok){e.next=9;break}return e.abrupt("return",{signedIn:!0,message:""});case 9:return e.next=11,a.json();case 11:return s=e.sent,e.abrupt("return",{signedIn:!1,message:s.message});case 13:case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(f.b)("preLogin/logout",Object(m.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/logout"),{method:"GET",credentials:"include",mode:"cors"});case 2:if(!e.sent.ok){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))),g=Object(f.c)({name:"preLogin",initialState:{registering:!1,signedIn:!1,message:""},reducers:{setRegistering:function(e,t){e.registering=t.payload},setMessage:function(e,t){e.message=t.payload.message}},extraReducers:(c={},Object(d.a)(c,O.fulfilled,(function(e,t){e.signedIn=t.payload.signedIn,e.message=t.payload.message})),Object(d.a)(c,p.fulfilled,(function(e,t){e.signedIn=t.payload})),c)}),x=function(e){return e.preLogin.registering},v=function(e){return e.preLogin.signedIn},y=function(e){return e.preLogin.message},k=g.actions,N=k.setRegistering,w=k.setMessage,C=g.reducer,S=n(29),E=n(14),D=Object(f.b)("user/getUserDetails",Object(m.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/user"),{mode:"cors",credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",{firstName:n.firstName,lastName:n.lastName,email:n.email});case 8:case"end":return e.stop()}}),e)})))),L=Object(f.c)({name:"user",initialState:{firstName:"",lastName:"",email:"",genres:[]},reducers:{resetUserDetails:function(e,t){e.firstName="",e.lastName="",e.email="",e.genres=[]},setGenres:function(e,t){if(-1===e.genres.indexOf(t.payload)&e.genres.length<5)return Object(E.a)(Object(E.a)({},e),{},{genres:[].concat(Object(S.a)(e.genres),[t.payload])});var n=e.genres.filter((function(e){return e!==t.payload}));return Object(E.a)(Object(E.a)({},e),{},{genres:n})}},extraReducers:Object(d.a)({},D.fulfilled,(function(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.email=t.payload.email}))}),T=function(e){return e.user.email},I=function(e){return e.user.genres},A=L.actions,B=A.resetUserDetails,q=A.setGenres,G=L.reducer,R=(n(41),n(0));function J(e){var t=e.genre,n=Object(u.c)(I),c=Object(u.b)();return Object(R.jsxs)("label",{htmlFor:t,className:"genre-label",children:[Object(R.jsx)("input",{className:"genre-checkbox",type:"checkbox",id:t,value:t.toLowerCase(),onClick:function(e){c(q(e.target.value))},checked:n.includes(t.toLowerCase()),readOnly:!0}),Object(R.jsx)("p",{className:"genre",children:t})]})}var M,P=!1,z=function(){var e=document.getElementById("genres");P?(e.style.display="none",P=!1):(e.style.display="block",P=!0)},U=Object(f.b)("music/getAccessToken",Object(m.a)(j.a.mark((function e(){var t,n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=btoa("".concat("9da83291fa8744f68669357eb0bef8da",":").concat("db1c51c9de494b6789087dc718c828de")),e.next=3,fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:"Basic ".concat(t),"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"});case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c.access_token);case 9:case 10:case"end":return e.stop()}}),e)})))),_=Object(f.b)("music/getAvailableGenres",function(){var e=Object(m.a)(j.a.mark((function e(t){var n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.accessToken,e.next=3,fetch("https://api.spotify.com/v1/recommendations/available-genre-seeds",{headers:{Authorization:"Bearer "+n}});case 3:if(!(c=e.sent).ok){e.next=9;break}return e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r.genres);case 9:case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(f.b)("music/getRecommendations",function(){var e=Object(m.a)(j.a.mark((function e(t){var n,c,r,a,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.accessToken,0!==(c=t.genres).length){e.next=5;break}return e.abrupt("return",[]);case 5:return r=c.join(),e.next=8,fetch("https://api.spotify.com/v1/recommendations?seed_genres=".concat(r),{headers:{Authorization:"Bearer "+n}});case 8:if(!(a=e.sent).ok){e.next=15;break}return e.next=12,a.json();case 12:return s=e.sent,i=s.tracks.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri,images:e.album.images}})),e.abrupt("return",i);case 15:case 16:case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V=Object(f.c)({name:"music",initialState:{accessToken:"",availableGenres:[],recommendations:[]},reducers:{resetMusicDetails:function(e,t){e.accessToken="",e.availableGenres=[],e.recommendations=[]}},extraReducers:(M={},Object(d.a)(M,U.fulfilled,(function(e,t){e.accessToken=t.payload})),Object(d.a)(M,_.fulfilled,(function(e,t){e.availableGenres=t.payload})),Object(d.a)(M,F.fulfilled,(function(e,t){e.recommendations=t.payload})),M)}),H=function(e){return e.music.accessToken},K=function(e){return e.music.availableGenres},Q=function(e){return e.music.recommendations},W=V.actions.resetMusicDetails,X=V.reducer;n(43);function Y(){var e=Object(u.c)(K);return Object(R.jsx)("form",{children:Object(R.jsxs)("div",{className:"multiselect",children:[Object(R.jsxs)("div",{className:"selectBox",onClick:z,children:[Object(R.jsx)("select",{id:"genre-dropdown",className:"form-select",children:Object(R.jsx)("option",{children:"Select genres (max 5)"})}),Object(R.jsx)("div",{className:"overSelect"})]}),Object(R.jsx)("div",{id:"genres",children:e.map((function(e){return Object(R.jsx)(J,{genre:e},e)}))})]})})}function Z(){var e=Object(u.b)();return Object(R.jsxs)("div",{id:"subnav",children:[Object(R.jsx)(Y,{}),Object(R.jsx)("form",{children:Object(R.jsx)("input",{className:"form-control",id:"search",type:"search",placeholder:"Search..."})}),Object(R.jsx)("button",{className:"form-control",id:"log-out",onClick:function(t){t.preventDefault(),e(B()),e(W()),e(p())},children:"Log Out"})]})}n(44);function $(){return Object(R.jsxs)("div",{id:"dashboard",children:[Object(R.jsx)(Z,{}),Object(R.jsx)("div",{className:"content",children:Object(R.jsx)("p",{children:"Dashboard"})})]})}n(45);function ee(e){var t=e.track;return Object(R.jsxs)("div",{className:"track",children:[Object(R.jsx)("img",{src:t.images[2].url,alt:t.name}),Object(R.jsx)("h6",{className:"track-info",children:t.name}),Object(R.jsx)("h6",{className:"track-info",children:t.artist})]})}n(46);function te(){var e=Object(u.c)(Q);return 0===e.length?Object(R.jsxs)("div",{id:"recommendations",children:[Object(R.jsx)(Z,{}),Object(R.jsx)("div",{className:"content",children:Object(R.jsx)("div",{children:"Select genres to see recommendations."})})]}):Object(R.jsxs)("div",{id:"recommendations",children:[Object(R.jsx)(Z,{}),Object(R.jsx)("div",{className:"content",children:e.map((function(e){return Object(R.jsx)(ee,{track:e},e.id)}))})]})}n(47);function ne(){return Object(R.jsxs)("div",{id:"forum",children:[Object(R.jsx)(Z,{}),Object(R.jsx)("div",{className:"content",children:Object(R.jsx)("p",{children:"Forum"})})]})}n(48);function ce(){return Object(R.jsxs)("div",{id:"account",children:[Object(R.jsx)(Z,{}),Object(R.jsx)("div",{className:"content",children:Object(R.jsx)("p",{children:"Account"})})]})}var re=function(){var e=document.getElementById("sidebar"),t=document.getElementsByClassName("nav-heading"),n=document.getElementsByClassName("nav-icon"),c=document.getElementById("toggle-button");if(e.classList.toggle("active"),c.classList.toggle("rotate"),t[0].classList.contains("hide"))setTimeout((function(){for(var e=0;e<t.length;e++)t[e].classList.toggle("hide");for(var c=0;c<n.length;c++)n[c].classList.toggle("hide")}),400);else{for(var r=0;r<t.length;r++)t[r].classList.toggle("hide");for(var a=0;a<n.length;a++)n[a].classList.toggle("hide")}},ae=(n(49),function(){var e=Object(m.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/genres"),{mode:"cors",credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),se=function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/user"),{method:"PUT",mode:"cors",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ie(){var e=Object(u.b)(),t=Object(u.c)(I),n=Object(u.c)(T),c=Object(u.c)(H);return Object(r.useEffect)((function(){""===c&""!==n&&e(U()),""!==c&&e(_({accessToken:c}))}),[c,e,n]),Object(r.useEffect)((function(){""!==n&&ae().then((function(t){for(var n=0;n<t.length;n++)e(q(t[n]))}))}),[e,n]),Object(r.useEffect)((function(){""!==c&&e(F({accessToken:c,genres:t}))}),[t,c,e]),Object(r.useEffect)((function(){""!==n&&se(t)}),[t,n]),Object(R.jsxs)(o.a,{children:[Object(R.jsx)(l.a,{to:"/dashboard"}),Object(R.jsxs)("nav",{id:"sidebar",className:"active",children:[Object(R.jsxs)("ul",{id:"nav-list",children:[Object(R.jsx)("li",{className:"nav-element",children:Object(R.jsxs)(o.b,{to:"/dashboard",children:[Object(R.jsx)("i",{className:"bi bi-house-fill nav-icon"}),Object(R.jsx)("h2",{className:"nav-heading hide",children:"Dashboard"})]})}),Object(R.jsx)("li",{className:"nav-element",children:Object(R.jsxs)(o.b,{to:"/recommendations",children:[Object(R.jsx)("i",{className:"bi bi-music-note-beamed nav-icon"}),Object(R.jsx)("h2",{className:"nav-heading hide",children:"Recommendations"})]})}),Object(R.jsx)("li",{className:"nav-element",children:Object(R.jsxs)(o.b,{to:"/forum",children:[Object(R.jsx)("i",{className:"bi bi-chat-fill nav-icon"}),Object(R.jsx)("h2",{className:"nav-heading hide",children:"Forum"})]})}),Object(R.jsx)("li",{className:"nav-element",children:Object(R.jsxs)(o.b,{to:"/account",children:[Object(R.jsx)("i",{className:"bi bi-person-fill nav-icon"}),Object(R.jsx)("h2",{className:"nav-heading hide",children:"Account"})]})})]}),Object(R.jsx)("button",{id:"toggle-button",className:"rotate",onClick:re,children:Object(R.jsx)("i",{className:"bi bi-arrow-left-circle-fill",id:"toggle-arrow"})})]}),Object(R.jsxs)(l.d,{children:[Object(R.jsx)(l.b,{path:"/dashboard",children:Object(R.jsx)($,{})}),Object(R.jsx)(l.b,{path:"/recommendations",children:Object(R.jsx)(te,{})}),Object(R.jsx)(l.b,{path:"/forum",children:Object(R.jsx)(ne,{})}),Object(R.jsx)(l.b,{path:"/Account",children:Object(R.jsx)(ce,{})})]})]})}var oe=n(12),le=(n(54),function(){document.getElementById("message").style.visibility="visible"});function ue(){var e=Object(u.b)(),t=Object(r.useState)(null),n=Object(oe.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(null),i=Object(oe.a)(s,2),o=i[0],l=i[1],d=Object(u.c)(y);return Object(r.useEffect)((function(){le()}),[d]),Object(R.jsxs)("div",{id:"login",children:[Object(R.jsx)("p",{id:"message",children:d}),Object(R.jsxs)("form",{id:"login-form",onSubmit:function(t){t.preventDefault(),e(O({email:c,password:o}))},children:[Object(R.jsx)("input",{type:"email",placeholder:"Enter your email address",className:"form-control login-element",onChange:function(e){e.preventDefault(),a(e.target.value)},required:!0}),Object(R.jsx)("input",{type:"password",placeholder:"Enter your password",className:"form-control login-element",onChange:function(e){e.preventDefault(),l(e.target.value)},required:!0}),Object(R.jsx)("button",{id:"login-button",type:"submit",className:"btn btn-outline-light login-element",children:"Log In"})]}),Object(R.jsx)("button",{onClick:function(t){t.preventDefault(),e(N(!0)),e(w({message:""}))},id:"reg-link",className:"btn btn-outline-light login-element",children:"Don't have an account? Click here to sign up."})]})}n(55);var de=function(){var e=Object(m.a)(j.a.mark((function e(t,n,c,r,a){var s,i,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r===a){e.next=4;break}return e.abrupt("return",{message:"Passwords do not match."});case 4:return s={firstName:t,lastName:n,email:c,password:r},e.next=7,fetch("".concat(h,"/register"),{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 7:if(!(i=e.sent).ok){e.next=13;break}return e.next=11,i.json();case 11:return o=e.sent,e.abrupt("return",o);case 13:return e.next=16,i.json();case 16:return l=e.sent,e.abrupt("return",l);case 18:case 19:case"end":return e.stop()}}),e)})));return function(t,n,c,r,a){return e.apply(this,arguments)}}();function be(){var e=Object(u.b)(),t=Object(r.useState)(null),n=Object(oe.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(null),i=Object(oe.a)(s,2),o=i[0],l=i[1],d=Object(r.useState)(null),b=Object(oe.a)(d,2),f=b[0],h=b[1],O=Object(r.useState)(null),p=Object(oe.a)(O,2),g=p[0],x=p[1],v=Object(r.useState)(null),k=Object(oe.a)(v,2),C=k[0],S=k[1],E=Object(u.c)(y),D=function(){var t=Object(m.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,de(c,o,f,g,C);case 3:r=t.sent,e(w({message:r.message}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){"Account created successfully."===E?e(N(!1)):le()}),[E,e]),Object(R.jsxs)("div",{id:"reg",children:[Object(R.jsx)("p",{id:"message",children:E}),Object(R.jsxs)("form",{id:"reg-form",onSubmit:D,children:[Object(R.jsx)("input",{type:"text",placeholder:"Enter your first name",className:"form-control reg-element",onChange:function(e){e.preventDefault(),a(e.target.value)},required:!0}),Object(R.jsx)("input",{type:"text",placeholder:"Enter your last name",className:"form-control reg-element",onChange:function(e){e.preventDefault(),l(e.target.value)},required:!0}),Object(R.jsx)("input",{type:"email",placeholder:"Enter your email address",className:"form-control reg-element",onChange:function(e){e.preventDefault(),h(e.target.value)},required:!0}),Object(R.jsx)("input",{type:"password",placeholder:"Enter your password",className:"form-control reg-element",onChange:function(e){e.preventDefault(),x(e.target.value)},required:!0}),Object(R.jsx)("input",{type:"password",placeholder:"Validate your password",className:"form-control reg-element",onChange:function(e){e.preventDefault(),S(e.target.value)},required:!0}),Object(R.jsx)("button",{id:"reg-button",type:"submit",className:"btn btn-outline-light",children:"Register"})]}),Object(R.jsx)("button",{id:"login-link",className:"btn btn-outline-light reg-element",onClick:function(t){t.preventDefault(),e(N(!1)),e(w({message:""}))},children:"Already have an account? Click here to log in."})]})}function je(){var e=Object(u.b)(),t=Object(u.c)(x),n=Object(u.c)(v);return Object(r.useEffect)((function(){""!==document.cookie&!n&&e(O())})),Object(r.useEffect)((function(){n&&e(D())})),Object(R.jsxs)(o.a,{children:[n&&Object(R.jsx)(l.a,{to:"/signedin"}),t&&Object(R.jsx)(l.a,{to:"/register"}),!n&&!t&&Object(R.jsx)(l.a,{to:"/login"}),Object(R.jsxs)(l.d,{children:[Object(R.jsx)(l.b,{path:"/login",children:Object(R.jsx)(ue,{})}),Object(R.jsx)(l.b,{path:"/signedin",children:Object(R.jsx)(ie,{})}),Object(R.jsx)(l.b,{path:"/register",children:Object(R.jsx)(be,{})})]})]})}var me=n(13),fe=n(27),he=n.n(fe),Oe=n(6),pe={key:"root",storage:he.a},ge=Object(Oe.b)({preLogin:C,user:G,music:X}),xe=Object(me.g)(pe,ge),ve=Object(f.a)({reducer:xe,middleware:function(e){return e({serializableCheck:{ignoredActions:[me.a,me.f,me.b,me.c,me.d,me.e]}})}}),ye=Object(me.h)(ve),ke=(n(58),n(28));i.a.render(Object(R.jsx)(a.a.StrictMode,{children:Object(R.jsx)(u.a,{store:ve,children:Object(R.jsx)(ke.a,{loading:null,persistor:ye,children:Object(R.jsx)(je,{})})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.1ab9d808.chunk.js.map