(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(21),a=n.n(r),i=n(14),o=n(5),u=(n(35),n(4)),l=n(13),b=n(30),d=n(20),j=n(3),f=n.n(j),m=n(6),p=n(9),O=Object(p.b)("user/getUserDetails",Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user",{mode:"cors",credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",{firstName:n.firstName,lastName:n.lastName,email:n.email});case 8:case"end":return e.stop()}}),e)})))),h=Object(p.c)({name:"user",initialState:{firstName:"",lastName:"",email:"",genres:[]},reducers:{resetUserDetails:function(e,t){e.firstName="",e.lastName="",e.email="",e.genres=[]},setGenres:function(e,t){if(-1===e.genres.indexOf(t.payload)&e.genres.length<5)return Object(d.a)(Object(d.a)({},e),{},{genres:[].concat(Object(b.a)(e.genres),[t.payload])});var n=e.genres.filter((function(e){return e!==t.payload}));return Object(d.a)(Object(d.a)({},e),{},{genres:n})}},extraReducers:Object(l.a)({},O.fulfilled,(function(e,t){e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,e.email=t.payload.email}))}),g=function(e){return e.user.firstName},x=function(e){return e.user.lastName},v=function(e){return e.user.email},y=function(e){return e.user.genres},N=h.actions,k=N.resetUserDetails,w=N.setGenres,S=h.reducer,C=(n(42),n(0));function D(e){var t=e.genre,n=Object(u.c)(y),c=Object(u.b)();return Object(C.jsxs)("label",{htmlFor:t,className:"genre-label",children:[Object(C.jsx)("input",{className:"genre-checkbox",type:"checkbox",id:t,value:t.toLowerCase(),onClick:function(e){c(w(e.target.value))},checked:n.includes(t.toLowerCase()),readOnly:!0}),Object(C.jsx)("p",{className:"genre",children:t})]})}var E,T=!1,L=function(){var e=document.getElementById("genres");T?(e.style.display="none",T=!1):(e.style.display="block",T=!0)},A=Object(p.b)("music/getAccessToken",Object(m.a)(f.a.mark((function e(){var t,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=btoa("".concat("9da83291fa8744f68669357eb0bef8da",":").concat("db1c51c9de494b6789087dc718c828de")),e.next=3,fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:"Basic ".concat(t),"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"});case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return c=e.sent,e.abrupt("return",c.access_token);case 9:case 10:case"end":return e.stop()}}),e)})))),I=Object(p.b)("music/getAvailableGenres",function(){var e=Object(m.a)(f.a.mark((function e(t){var n,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.accessToken,e.next=3,fetch("https://api.spotify.com/v1/recommendations/available-genre-seeds",{headers:{Authorization:"Bearer "+n}});case 3:if(!(c=e.sent).ok){e.next=9;break}return e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s.genres);case 9:case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(p.b)("music/getSuggestions",function(){var e=Object(m.a)(f.a.mark((function e(t){var n,c,s,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.accessToken,0!==(c=t.genres).length){e.next=5;break}return e.abrupt("return",[]);case 5:return s=c.join(),e.next=8,fetch("https://api.spotify.com/v1/recommendations?seed_genres=".concat(s),{headers:{Authorization:"Bearer "+n}});case 8:if(!(r=e.sent).ok){e.next=15;break}return e.next=12,r.json();case 12:return a=e.sent,i=a.tracks.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri,images:e.album.images}})),e.abrupt("return",i);case 15:case 16:case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(p.c)({name:"music",initialState:{accessToken:"",availableGenres:[],suggestions:[]},reducers:{resetMusicDetails:function(e,t){e.accessToken="",e.availableGenres=[],e.suggestions=[]}},extraReducers:(E={},Object(l.a)(E,A.fulfilled,(function(e,t){e.accessToken=t.payload})),Object(l.a)(E,I.fulfilled,(function(e,t){e.availableGenres=t.payload})),Object(l.a)(E,q.fulfilled,(function(e,t){e.suggestions=t.payload})),E)}),_=function(e){return e.music.accessToken},B=function(e){return e.music.availableGenres},R=function(e){return e.music.suggestions},z=G.actions.resetMusicDetails,J=G.reducer;n(44);function M(){var e=Object(u.c)(B);return Object(C.jsx)("form",{children:Object(C.jsxs)("div",{className:"multiselect",children:[Object(C.jsxs)("div",{className:"selectBox",onClick:L,children:[Object(C.jsx)("select",{id:"genre-dropdown",className:"form-select",children:Object(C.jsx)("option",{children:"Select genres (max 5)"})}),Object(C.jsx)("div",{className:"overSelect"})]}),Object(C.jsx)("div",{id:"genres",children:e.map((function(e){return Object(C.jsx)(D,{genre:e},e)}))})]})})}function P(){return Object(C.jsxs)("div",{id:"subnav",children:[Object(C.jsx)(M,{}),Object(C.jsx)("form",{children:Object(C.jsx)("input",{className:"form-control",id:"search",type:"search",placeholder:"Search..."})})]})}n(45);function U(){return Object(C.jsxs)("div",{id:"dashboard",children:[Object(C.jsx)(P,{}),Object(C.jsx)("div",{className:"content",children:Object(C.jsx)("p",{children:"Dashboard"})})]})}n(46);function F(e){var t=e.track;return Object(C.jsxs)("div",{className:"track",children:[Object(C.jsx)("img",{src:t.images[2].url,alt:t.name}),Object(C.jsx)("h6",{className:"track-info",children:t.name}),Object(C.jsx)("h6",{className:"track-info",children:t.artist})]})}n(47);function V(){var e=Object(u.c)(R);return 0===e.length?Object(C.jsxs)("div",{id:"suggestions",children:[Object(C.jsx)(P,{}),Object(C.jsx)("div",{className:"content",children:Object(C.jsx)("div",{children:"Select genres to see suggestions."})})]}):Object(C.jsxs)("div",{id:"suggestions",children:[Object(C.jsx)(P,{}),Object(C.jsx)("div",{className:"content",children:e.map((function(e){return Object(C.jsx)(F,{track:e},e.id)}))})]})}n(48);function H(){return Object(C.jsxs)("div",{id:"forum",children:[Object(C.jsx)(P,{}),Object(C.jsx)("div",{className:"content",children:Object(C.jsx)("p",{children:"Forum"})})]})}n(49);function K(){return Object(C.jsxs)("div",{id:"account",children:[Object(C.jsx)(P,{}),Object(C.jsx)("div",{className:"content",children:Object(C.jsx)("p",{children:"Account"})})]})}n(50);var Q,W=function(){var e=Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/genres",{mode:"cors",credentials:"include"});case 2:if(!(t=e.sent).ok){e.next=8;break}return e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(m.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/user",{method:"PUT",mode:"cors",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=n.p+"static/media/inverted-logo.31f83cb9.png",Z=Object(p.b)("preLogin/requestLogin",function(){var e=Object(m.a)(f.a.mark((function e(t){var n,c,s,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,c=t.password,s={email:n,password:c},e.next=4,fetch("/authenticate",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 4:if(!(r=e.sent).ok){e.next=9;break}return e.abrupt("return",{signedIn:!0,message:""});case 9:return e.next=11,r.json();case 11:return a=e.sent,e.abrupt("return",{signedIn:!1,message:a.message});case 13:case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$=Object(p.b)("preLogin/logout",Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/logout",{method:"GET",credentials:"include",mode:"cors"});case 2:if(!e.sent.ok){e.next=6;break}return window.location.reload(),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))),ee=Object(p.c)({name:"preLogin",initialState:{registering:!1,signedIn:!1,message:""},reducers:{setRegistering:function(e,t){e.registering=t.payload},setMessage:function(e,t){e.message=t.payload.message}},extraReducers:(Q={},Object(l.a)(Q,Z.fulfilled,(function(e,t){e.signedIn=t.payload.signedIn,e.message=t.payload.message})),Object(l.a)(Q,$.fulfilled,(function(e,t){e.signedIn=t.payload})),Q)}),te=function(e){return e.preLogin.registering},ne=function(e){return e.preLogin.signedIn},ce=function(e){return e.preLogin.message},se=ee.actions,re=se.setRegistering,ae=se.setMessage,ie=ee.reducer;function oe(){var e=Object(u.b)(),t=Object(u.c)(y),n=Object(u.c)(v),s=Object(u.c)(g),r=Object(u.c)(x),a=Object(u.c)(_);return Object(c.useEffect)((function(){""!==n&&window.pendo.initialize({disableCookies:!0,visitor:{id:n,email:n,full_name:"".concat(s," ").concat(r),return_url:"https://shut-up-and-dance.herokuapp.com/dashboard"},account:{id:n,name:n,is_paying:!1,monthly_value:0}})}),[n,s,r]),Object(c.useEffect)((function(){""===a&""!==n&&e(A()),""!==a&&e(I({accessToken:a}))}),[a,e,n]),Object(c.useEffect)((function(){""!==n&&W().then((function(t){for(var n=0;n<t.length;n++)e(w(t[n]))}))}),[e,n]),Object(c.useEffect)((function(){""!==a&&e(q({accessToken:a,genres:t}))}),[t,a,e]),Object(c.useEffect)((function(){""!==n&&X(t)}),[t,n]),Object(C.jsxs)(i.a,{children:[Object(C.jsx)(o.a,{to:"/dashboard"}),Object(C.jsxs)("nav",{id:"sidebar",children:[Object(C.jsxs)("ul",{id:"nav-list",children:[Object(C.jsx)("li",{className:"icon-element",children:Object(C.jsx)(i.b,{to:"/dashboard",children:Object(C.jsx)("img",{src:Y,alt:"logo",id:"logo"})})}),Object(C.jsx)("li",{className:"nav-element",children:Object(C.jsxs)(i.b,{to:"/dashboard",className:"nav-option",children:[Object(C.jsx)("i",{className:"bi bi-house-fill nav-icon dashboard-button"}),Object(C.jsx)("p",{className:"nav-title",children:"Dashboard"})]})}),Object(C.jsx)("li",{className:"nav-element",children:Object(C.jsxs)(i.b,{to:"/suggestions",className:"nav-option",children:[Object(C.jsx)("i",{className:"bi bi-music-note-beamed nav-icon suggestions-button"}),Object(C.jsx)("p",{className:"nav-title",children:"Suggestions"})]})}),Object(C.jsx)("li",{className:"nav-element",children:Object(C.jsxs)(i.b,{to:"/forum",className:"nav-option",children:[Object(C.jsx)("i",{className:"bi bi-chat-fill nav-icon forum-button"}),Object(C.jsx)("p",{className:"nav-title",children:"Forum"})]})}),Object(C.jsx)("li",{className:"nav-element",children:Object(C.jsxs)(i.b,{to:"/account",className:"nav-option",children:[Object(C.jsx)("i",{className:"bi bi-person-fill nav-icon account-button"}),Object(C.jsx)("p",{className:"nav-title",children:"Account"})]})})]}),Object(C.jsxs)("button",{className:"nav-option",id:"logout",onClick:function(t){t.preventDefault(),e(k()),e(z()),e($())},children:[Object(C.jsx)("i",{className:"bi bi-box-arrow-left nav-icon"}),Object(C.jsx)("p",{className:"nav-title",children:"Log Out"})]})]}),Object(C.jsxs)(o.d,{children:[Object(C.jsx)(o.b,{path:"/dashboard",children:Object(C.jsx)(U,{})}),Object(C.jsx)(o.b,{path:"/suggestions",children:Object(C.jsx)(V,{})}),Object(C.jsx)(o.b,{path:"/forum",children:Object(C.jsx)(H,{})}),Object(C.jsx)(o.b,{path:"/Account",children:Object(C.jsx)(K,{})})]})]})}var ue=n(15),le=(n(55),function(){document.getElementById("message").style.visibility="visible"});function be(){var e=Object(u.b)(),t=Object(c.useState)(null),n=Object(ue.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(null),i=Object(ue.a)(a,2),o=i[0],l=i[1],b=Object(u.c)(ce);return Object(c.useEffect)((function(){le()}),[b]),Object(C.jsxs)("div",{id:"login",children:[Object(C.jsx)("div",{className:"overlay"}),Object(C.jsx)("p",{id:"message",children:b}),Object(C.jsxs)("form",{id:"login-form",onSubmit:function(t){t.preventDefault(),e(Z({email:s,password:o}))},children:[Object(C.jsx)("input",{type:"email",placeholder:"Enter your email address",className:"form-control login-element",onChange:function(e){e.preventDefault(),r(e.target.value)},required:!0}),Object(C.jsx)("input",{type:"password",placeholder:"Enter your password",className:"form-control login-element",onChange:function(e){e.preventDefault(),l(e.target.value)},required:!0}),Object(C.jsx)("button",{id:"login-button",type:"submit",className:"btn btn-outline-light login-element",children:"Log In"})]}),Object(C.jsx)("button",{onClick:function(t){t.preventDefault(),e(re(!0)),e(ae({message:""}))},id:"reg-link",className:"btn btn-outline-light login-element",children:"Don't have an account? Click here to sign up."})]})}n(56);var de=function(){var e=Object(m.a)(f.a.mark((function e(t,n,c,s,r){var a,i,o,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s===r){e.next=4;break}return e.abrupt("return",{message:"Passwords do not match."});case 4:return a={firstName:t,lastName:n,email:c,password:s},e.next=7,fetch("/register",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 7:if(!(i=e.sent).ok){e.next=13;break}return e.next=11,i.json();case 11:return o=e.sent,e.abrupt("return",o);case 13:return e.next=16,i.json();case 16:return u=e.sent,e.abrupt("return",u);case 18:case 19:case"end":return e.stop()}}),e)})));return function(t,n,c,s,r){return e.apply(this,arguments)}}();function je(){var e=Object(u.b)(),t=Object(c.useState)(null),n=Object(ue.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(null),i=Object(ue.a)(a,2),o=i[0],l=i[1],b=Object(c.useState)(null),d=Object(ue.a)(b,2),j=d[0],p=d[1],O=Object(c.useState)(null),h=Object(ue.a)(O,2),g=h[0],x=h[1],v=Object(c.useState)(null),y=Object(ue.a)(v,2),N=y[0],k=y[1],w=Object(u.c)(ce),S=function(){var t=Object(m.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,de(s,o,j,g,N);case 3:c=t.sent,e(ae({message:c.message}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){"Account created successfully."===w?e(re(!1)):le()}),[w,e]),Object(C.jsxs)("div",{id:"reg",children:[Object(C.jsx)("div",{className:"overlay"}),Object(C.jsx)("p",{id:"message",children:w}),Object(C.jsxs)("form",{id:"reg-form",onSubmit:S,children:[Object(C.jsx)("input",{type:"text",placeholder:"Enter your first name",className:"form-control reg-element",onChange:function(e){e.preventDefault(),r(e.target.value)},required:!0}),Object(C.jsx)("input",{type:"text",placeholder:"Enter your last name",className:"form-control reg-element",onChange:function(e){e.preventDefault(),l(e.target.value)},required:!0}),Object(C.jsx)("input",{type:"email",placeholder:"Enter your email address",className:"form-control reg-element",onChange:function(e){e.preventDefault(),p(e.target.value)},required:!0}),Object(C.jsx)("input",{type:"password",placeholder:"Enter your password",className:"form-control reg-element",onChange:function(e){e.preventDefault(),x(e.target.value)},required:!0}),Object(C.jsx)("input",{type:"password",placeholder:"Validate your password",className:"form-control reg-element",onChange:function(e){e.preventDefault(),k(e.target.value)},required:!0}),Object(C.jsx)("button",{id:"reg-button",type:"submit",className:"btn btn-outline-light",children:"Register"})]}),Object(C.jsx)("button",{id:"login-link",className:"btn btn-outline-light reg-element",onClick:function(t){t.preventDefault(),e(re(!1)),e(ae({message:""}))},children:"Already have an account? Click here to log in."})]})}function fe(){var e=Object(u.b)(),t=Object(u.c)(te),n=Object(u.c)(ne);return"https:"!==window.location.protocol&&window.location.replace("https:".concat(window.location.href.substring(window.location.protocol.length))),Object(c.useEffect)((function(){""!==document.cookie&!n&&e(Z())})),Object(c.useEffect)((function(){n&&e(O())})),Object(C.jsxs)(i.a,{children:[n&&Object(C.jsx)(o.a,{to:"/signedin"}),t&&Object(C.jsx)(o.a,{to:"/register"}),!n&&!t&&Object(C.jsx)(o.a,{to:"/login"}),Object(C.jsxs)(o.d,{children:[Object(C.jsx)(o.b,{path:"/login",children:Object(C.jsx)(be,{})}),Object(C.jsx)(o.b,{path:"/signedin",children:Object(C.jsx)(oe,{})}),Object(C.jsx)(o.b,{path:"/register",children:Object(C.jsx)(je,{})})]})]})}var me=n(16),pe=n(28),Oe=n.n(pe),he=n(7),ge={key:"root",storage:Oe.a},xe=Object(he.b)({preLogin:ie,user:S,music:J}),ve=Object(me.g)(ge,xe),ye=Object(p.a)({reducer:ve,middleware:function(e){return e({serializableCheck:{ignoredActions:[me.a,me.f,me.b,me.c,me.d,me.e]}})}}),Ne=Object(me.h)(ye),ke=(n(59),n(29));a.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(u.a,{store:ye,children:Object(C.jsx)(ke.a,{loading:null,persistor:Ne,children:Object(C.jsx)(fe,{})})})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.bbd412ae.chunk.js.map